{% extends "base.html" %}

{% block title %}{{ page_title or ('å½’æ¡£ - ' ~ (site_title or 'Noteblog')) }}{% endblock %}

{% block content %}
<section class="archives-board">
    <header>
        <h1>æ–‡ç« å½’æ¡£</h1>
        <p>æŒ‰å¹´ä»½/æœˆä»½å›é¡¾æ‰€æœ‰å‘å¸ƒã€‚</p>
        <div class="archive-stats">
            <div>
                <span class="stat-label">æ–‡ç« </span>
                <strong>{{ total_posts or 0 }}</strong>
            </div>
            <div>
                <span class="stat-label">åˆ†ç±»</span>
                <strong>{{ total_categories or 0 }}</strong>
            </div>
            <div>
                <span class="stat-label">æ ‡ç­¾</span>
                <strong>{{ total_tags or 0 }}</strong>
            </div>
            <div>
                <span class="stat-label">æ€»å­—æ•°</span>
                <strong>{{ total_words or 0 }}</strong>
            </div>
        </div>
    </header>

    {% if archives %}
    <div class="archive-timeline">
        {% for year, items in archives|dictsort(true) %}
        <section class="timeline-year">
            <h2>{{ year }}</h2>
            <div class="timeline-list">
                {% for post in items %}
                <article>
                    <div class="timeline-meta">
                        <time>{{ post.created_at.strftime('%m-%d') }}</time>
                        {% if post.category %}
                        <a href="/category/{{ post.category.slug }}">{{ post.category.name }}</a>
                        {% endif %}
                    </div>
                    <h3><a href="/post/{{ post.slug }}">{{ post.title }}</a></h3>
                    {% if post.summary %}
                    <p>{{ post.summary }}</p>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
        </section>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>ğŸ“š</p>
        <h3>æš‚æ— å½’æ¡£</h3>
    </div>
    {% endif %}
</section>
{% endblock %}
